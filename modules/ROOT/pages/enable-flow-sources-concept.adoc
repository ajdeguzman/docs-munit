= Enable Flow Sources
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:keywords: munit, test, flow sources
:flow_name: http-example-flow
:port: 1234
:payload: 'Hello World!'

The Enable Flow Sources element within the MUnit Test tells MUnit which Event Sources to load and execute for the test.

By default, MUnit does not start any of the Event Sources (triggers, listeners or otherwise). It's up to you to configure which of those to start for your tests.


For example, assume that your application has a flow with an HTTP listener that returns a specific payload:

[source,xml,linenums,subs="verbatim,attributes"]
----
<http:listener-config name="HTTP_Listener_config">
    <http:listener-connection host="localhost" port="{port}"/>
</http:listener-config>

<flow name="{flow_name}">
    <http:listener path="/" config-ref="HTTP_Listener_config"/>
    <set-payload value="#[{payload}]" mimeType="text/plain"/>
</flow>
----

You need to enable the `http-transportFlow` in your `enable-flow-source` property so that MUnit is able to reach that listener:

[source,xml,linenums,subs="verbatim,attributes"]
----
<http:request-config name="HTTP_Request_config">
    <http:request-connection host="localhost" port="{port}"/>
</http:request-config>

<munit:test name="http-example-test">
    <munit:enable-flow-sources>
        <munit:enable-flow-source value="{flow_name}"/> <!--1-->
    </munit:enable-flow-sources>

    <munit:execution>
        <http:request method="GET" path="/" config-ref="HTTP_Request_config"/>
    </munit:execution>

    <munit:validation>
        <munit-tools:assert-that expression="#[payload]"
                                 is="#[MunitTools::equalTo({payload})]"/>
    </munit:validation>
</munit:test>
----
<1> If the `{flow_name}` value is not listed as an enabled flow source, your MUnit test fails because it cannot initialize the
HTTP listener configuration.

[NOTE]
--
MUnit starts flow sources at the beginning of the test, and stops them at the end of the test. Flow sources are not executed during the before-suite/before-test, nor during the after-test/after-suite.
--

== Enabling Flow Sources from Studio

You can also define flow sources using the *Mule Properties* view of your MUnit test in Anypoint Studio:

image::enable-flow-sources-concept.png[]

. Click *Add*.
. Select the name of the flow you want to enable from the *Name of the flow* drop-down menu.


== See Also

* xref:munit-test-concept.adoc[About MUnit Test]
